<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Starkle</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- If you're using Vite with TypeScript, your script tag may point to a .ts file -->
    <script type="module" src="/src/login.ts"></script>
    <script type="module" src="/src/main.ts"></script>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  </head>
  <body>
    <div class="loginContainer" id="landingContainer">
      <h1>Starkle</h1>
      <form id="landingForm">
        <label for="username">Username</label>
        <input
          type="text"
          id="form-username"
          name="username"
          required
          placeholder="Enter your username"
        />

        <p>Select a wallet method:</p>
        <div class="method-buttons">
          <input
            type="radio"
            id="methodGenerate"
            name="walletMethod"
            value="generate"
            required
          />
          <label for="methodGenerate">Generate &amp; Fund</label>

          <input
            type="radio"
            id="methodImport"
            name="walletMethod"
            value="import"
          />
          <label for="methodImport">Import Secret Key</label>

          <input
            type="radio"
            id="methodFreighter"
            name="walletMethod"
            value="freighter"
          />
          <label for="methodFreighter">Freighter Wallet</label>
        </div>

        <!-- Secret Key Field (only shown if "Import" is selected) -->
        <div id="importKeyField">
          <label for="secretKey">Secret Key</label>
          <input
            type="password"
            id="secretKey"
            name="secretKey"
            placeholder="Enter your secret key"
          />
        </div>

        <button type="submit" class="submit-btn">Continue</button>
      </form>
    </div>

    <div class="container" style="display: none">
      <!-- Left Sidebar: Account Status and Scoreboard -->
      <aside class="stats">
        <!-- Account Status Panel -->
        <div class="panel account-panel">
          <h3 id="accountStatusHeader">
            <span id="username">...</span>'s account
            <button id="logout" title="Disconnect account">Logout</button>
          </h3>
          <div>
            Account ID: <span id="account-id">(loading...)</span
            ><button class="refresh btn-tiny">â†º</button>
          </div>
          <div>Account Balance: <span id="account-balance">0</span> XLM</div>
          <div>In-Game Balance: <span id="in-game-balance">0</span> XLM</div>
          <div>Wager: <span id="wager">0</span> XLM</div>
          <div class="action-buttons">
            <button
              class="action-button btn-green deposit"
              title="Deposit 10 XLM into the contract for wagers"
            >
              Deposit
            </button>
            <button
              class="action-button btn-red withdraw"
              title="Withdraw your funds from the contract"
            >
              Withdraw
            </button>
          </div>
          <button class="action-button btn-yellow" id="play">Join Queue</button>
        </div>

        <!-- Scoreboard Panel -->
        <div class="panel scoreboard" style="display: none">
          <div class="scoreboard-row header">
            <div class="playerA" id="name"></div>
            <div></div>
            <div class="playerB" id="opponent-name"></div>
          </div>
          <div class="scoreboard-row">
            <div class="playerA total" id="total-score">0</div>
            <div class="label">score</div>
            <div class="playerB total" id="opponent-total-score">0</div>
          </div>
          <div class="scoreboard-row">
            <div class="playerA turn" id="turn-score">0</div>
            <div class="label">turn</div>
            <div class="playerB turn" id="opponent-turn-score">0</div>
          </div>
        </div>
      </aside>

      <!-- Game Area (Center) -->
      <main class="game-area"></main>

      <!-- Chat Panel (Right) -->
      <aside class="chat-panel" style="display: none">
        <h2>Chat</h2>
        <div class="chat-messages" id="chat-messages">
          <!-- Chat messages will appear here -->
        </div>
        <input
          type="text"
          class="chat-input"
          id="chat-input"
          placeholder="Type a message..."
        />
      </aside>
    </div>

    <!-- Waiting for Opponent Modal (Full-screen overlay) -->
    <div id="waitingModal" class="waiting-modal">
      <div class="waiting-modal-content">
        <div class="spinner"></div>
        <p id="wait-status">Waiting for opponent...</p>
      </div>
    </div>

    <!-- Dice Panel: Appears at bottom-center of Game Area -->
    <div id="dicePanel" class="dice-panel">
      <div class="dice-panel-content">
        <h2>Select Dice to Hold</h2>
        <div class="dice-container">
          <!-- 6 dice will be dynamically inserted here -->
        </div>
        <div class="modal-buttons">
          <button id="holdReroll" class="action-button btn-yellow">
            Hold + Reroll
          </button>
          <button id="holdPass" class="action-button btn-green">
            Hold + Pass
          </button>
        </div>
      </div>
    </div>

    <!-- Popup element -->
    <div id="topPopup" class="top-popup">
      This is your notification! It can be as long as you need; if the text
      overflows, it will wrap naturally.
    </div>

    <!-- Place this at the bottom of your body -->
    <footer class="footer">
      <span id="connectionStatus">
        <!-- Initial status: Connecting... -->
        <span class="status-icon connecting"></span>
        <span id="innerConnectionStatus">Connecting...</span>
      </span>
    </footer>
  </body>
</html>
